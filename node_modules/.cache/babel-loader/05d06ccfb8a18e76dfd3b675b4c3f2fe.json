{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jorge\\\\Desktop\\\\proyectos\\\\1react\\\\bookshooks\\\\bookshooks\\\\src\\\\context\\\\cart.js\";\nimport React from \"react\"; // import localCart from \"../utils/localCart\";\n\nimport reducer from \"./reducer\";\nimport { REMOVE, INCREASE, DECREASE, ADD_TO_CART, CLEAR_CART } from \"./actions\";\n\nfunction getCartFromLocalStorage() {\n  return localStorage.getItem(\"cart\") ? JSON.parse(localStorage.getItem(\"cart\")) : [];\n}\n\nconst CartContext = React.createContext();\n\nfunction CartProvider({\n  children\n}) {\n  const [cart, dispatch] = React.useReducer(reducer, getCartFromLocalStorage());\n  const [total, setTotal] = React.useState(0);\n  const [cartItems, setCartItems] = React.useState(0);\n  React.useEffect(() => {\n    // local storage\n    localStorage.setItem(\"cart\", JSON.stringify(cart)); // cart items\n\n    let newCartItems = cart.reduce((total, cartItem) => {\n      return total += cartItem.amount;\n    }, 0);\n    setCartItems(newCartItems); // cart total\n\n    let newTotal = cart.reduce((total, cartItem) => {\n      return total += cartItem.amount * cartItem.price;\n    }, 0);\n    newTotal = parseFloat(newTotal.toFixed(2));\n    setTotal(newTotal);\n  }, [cart]); // remove item\n\n  const removeItem = id => {\n    dispatch({\n      type: REMOVE,\n      payload: id\n    });\n  }; // increase amount\n\n\n  const increaseAmount = id => {\n    dispatch({\n      type: INCREASE,\n      payload: id\n    });\n  }; // decrease amount\n\n\n  const decreaseAmount = (id, amount) => {\n    if (amount === 1) {\n      dispatch({\n        type: REMOVE,\n        payload: id\n      });\n      return;\n    } else {\n      dispatch({\n        type: DECREASE,\n        payload: id\n      });\n    }\n  }; // add to cart\n\n\n  const addToCart = product => {\n    let item = [...cart].find(item => item.id === product.id);\n\n    if (item) {\n      dispatch({\n        type: INCREASE,\n        payload: product.id\n      });\n    } else {\n      dispatch({\n        type: ADD_TO_CART,\n        payload: product\n      });\n    }\n  }; // clear cart\n\n\n  const clearCart = () => {\n    dispatch({\n      type: CLEAR_CART\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(CartContext.Provider, {\n    value: {\n      cart,\n      total,\n      cartItems,\n      removeItem,\n      increaseAmount,\n      decreaseAmount,\n      addToCart,\n      clearCart\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }\n  }, children);\n}\n\nexport { CartContext, CartProvider };","map":{"version":3,"sources":["C:/Users/Jorge/Desktop/proyectos/1react/bookshooks/bookshooks/src/context/cart.js"],"names":["React","reducer","REMOVE","INCREASE","DECREASE","ADD_TO_CART","CLEAR_CART","getCartFromLocalStorage","localStorage","getItem","JSON","parse","CartContext","createContext","CartProvider","children","cart","dispatch","useReducer","total","setTotal","useState","cartItems","setCartItems","useEffect","setItem","stringify","newCartItems","reduce","cartItem","amount","newTotal","price","parseFloat","toFixed","removeItem","id","type","payload","increaseAmount","decreaseAmount","addToCart","product","item","find","clearCart"],"mappings":"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","sourcesContent":["import React from \"react\";\r\n// import localCart from \"../utils/localCart\";\r\nimport reducer from \"./reducer\";\r\nimport { REMOVE, INCREASE, DECREASE, ADD_TO_CART, CLEAR_CART } from \"./actions\";\r\nfunction getCartFromLocalStorage() {\r\n  return localStorage.getItem(\"cart\")\r\n    ? JSON.parse(localStorage.getItem(\"cart\"))\r\n    : [];\r\n}\r\n\r\nconst CartContext = React.createContext();\r\n\r\nfunction CartProvider({ children }) {\r\n  const [cart, dispatch] = React.useReducer(reducer, getCartFromLocalStorage());\r\n  const [total, setTotal] = React.useState(0);\r\n  const [cartItems, setCartItems] = React.useState(0);\r\n\r\n  React.useEffect(() => {\r\n    // local storage\r\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\r\n    // cart items\r\n    let newCartItems = cart.reduce((total, cartItem) => {\r\n      return (total += cartItem.amount);\r\n    }, 0);\r\n    setCartItems(newCartItems);\r\n    // cart total\r\n    let newTotal = cart.reduce((total, cartItem) => {\r\n      return (total += cartItem.amount * cartItem.price);\r\n    }, 0);\r\n    newTotal = parseFloat(newTotal.toFixed(2));\r\n    setTotal(newTotal);\r\n  }, [cart]);\r\n\r\n  // remove item\r\n  const removeItem = id => {\r\n    dispatch({ type: REMOVE, payload: id });\r\n  };\r\n  // increase amount\r\n  const increaseAmount = id => {\r\n    dispatch({ type: INCREASE, payload: id });\r\n  };\r\n  // decrease amount\r\n  const decreaseAmount = (id, amount) => {\r\n    if (amount === 1) {\r\n      dispatch({ type: REMOVE, payload: id });\r\n      return;\r\n    } else {\r\n      dispatch({ type: DECREASE, payload: id });\r\n    }\r\n  };\r\n  // add to cart\r\n  const addToCart = product => {\r\n    let item = [...cart].find(item => item.id === product.id);\r\n    if (item) {\r\n      dispatch({ type: INCREASE, payload: product.id });\r\n    } else {\r\n      dispatch({ type: ADD_TO_CART, payload: product });\r\n    }\r\n  };\r\n  // clear cart\r\n  const clearCart = () => {\r\n    dispatch({ type: CLEAR_CART });\r\n  };\r\n\r\n  return (\r\n    <CartContext.Provider\r\n      value={{\r\n        cart,\r\n        total,\r\n        cartItems,\r\n        removeItem,\r\n        increaseAmount,\r\n        decreaseAmount,\r\n        addToCart,\r\n        clearCart\r\n      }}\r\n    >\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n}\r\n\r\nexport { CartContext, CartProvider };\r\n"]},"metadata":{},"sourceType":"module"}